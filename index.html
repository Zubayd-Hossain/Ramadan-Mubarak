<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ramadan Mubarak ‚Äî Zubayd Hossain</title>
  <meta name="description" content="Unique Ramadan greeting with real-time Sehri & Iftar countdown for Bangladesh."/>
  <style>
    :root{
      --bg1:#040818;
      --bg2:#06122c;
      --glass: rgba(255,255,255,.08);
      --glass2: rgba(255,255,255,.12);
      --stroke: rgba(255,255,255,.16);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.72);
      --gold: #f2d07b;
      --cyan: #63e6ff;
      --shadow: 0 20px 60px rgba(0,0,0,.45);
      --radius: 22px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Noto Sans Bengali", sans-serif;
      color:var(--text);
      background: radial-gradient(1200px 800px at 70% 10%, rgba(99,230,255,.10), transparent 60%),
                  radial-gradient(900px 700px at 20% 20%, rgba(242,208,123,.10), transparent 60%),
                  linear-gradient(180deg, var(--bg1), var(--bg2));
      overflow-x:hidden;
    }
    a{color:inherit}
    .wrap{max-width:1100px;margin:0 auto;padding:24px}
    .topbar{
      display:flex;align-items:center;justify-content:space-between;
      gap:14px; padding:10px 14px; border-radius:999px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.12);
      backdrop-filter: blur(12px);
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
      position:sticky; top:14px; z-index:50;
    }
    .brand{
      display:flex; align-items:center; gap:10px; min-width:180px;
      letter-spacing:.3px;
    }
    .dot{
      width:10px;height:10px;border-radius:999px;
      background: radial-gradient(circle at 30% 30%, #fff, var(--cyan));
      box-shadow: 0 0 18px rgba(99,230,255,.75);
    }
    .brand small{display:block;color:var(--muted);font-size:12px;margin-top:2px}
    .controls{display:flex;gap:10px;align-items:center;flex-wrap:wrap;justify-content:flex-end}
    .pill{
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.06);
      color: var(--text);
      padding:10px 12px; border-radius:999px;
      display:flex; gap:8px; align-items:center;
      cursor:pointer; user-select:none;
      transition: transform .15s ease, background .2s ease, border .2s ease;
    }
    .pill:hover{transform:translateY(-1px); background: rgba(255,255,255,.09)}
    .pill:active{transform:translateY(0px) scale(.99)}
    .pill input{accent-color: var(--gold)}
    .hero{
      padding:56px 0 18px;
      display:grid; grid-template-columns: 1.1fr .9fr; gap:24px;
      align-items:center;
    }
    @media (max-width: 900px){
      .hero{grid-template-columns:1fr; padding-top:34px}
      .brand{min-width:auto}
    }
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      border:1px solid rgba(255,255,255,.14);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: blur(14px);
    }
    .heroCard{padding:26px 22px; position:relative; overflow:hidden}
    .shine{
      position:absolute; inset:-60px -30px auto auto; width:220px; height:220px;
      background: radial-gradient(circle at 30% 30%, rgba(242,208,123,.28), transparent 60%);
      transform: rotate(12deg);
      pointer-events:none;
    }
    h1{
      margin:0;
      font-size: clamp(34px, 4vw, 52px);
      line-height:1.08;
      letter-spacing:.2px;
    }
    .sub{
      margin:12px 0 0;
      font-size: 15.5px;
      color: var(--muted);
      line-height:1.65;
      max-width: 58ch;
    }
    .tagrow{display:flex; gap:10px; flex-wrap:wrap; margin-top:16px}
    .tag{
      padding:8px 12px; border-radius:999px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.10);
      font-size:13px; color: rgba(255,255,255,.78);
      white-space:nowrap;
    }

    .revealBox{
      margin-top:18px;
      display:flex; gap:10px; flex-wrap:wrap; align-items:center;
    }
    .btn{
      border:1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.08);
      color:var(--text);
      padding:12px 14px;
      border-radius: 14px;
      cursor:pointer;
      transition: transform .15s ease, background .2s ease, border .2s ease;
      box-shadow: 0 10px 25px rgba(0,0,0,.18);
      font-weight:600;
    }
    .btn:hover{transform:translateY(-1px); background: rgba(255,255,255,.11)}
    .btn.primary{
      background: linear-gradient(135deg, rgba(242,208,123,.25), rgba(99,230,255,.18));
      border-color: rgba(242,208,123,.35);
    }
    .btn:active{transform:translateY(0px) scale(.99)}
    .field{
      flex:1;
      min-width: 210px;
      display:flex; align-items:center; gap:10px;
      padding:12px 12px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.12);
    }
    .field input{
      width:100%;
      border:none; outline:none;
      background: transparent;
      color: var(--text);
      font-size: 14.5px;
    }
    .field input::placeholder{color: rgba(255,255,255,.55)}
    .field select{
      width:100%;
      border:none; outline:none;
      background:transparent;
      color:rgba(255,255,255,.92);
      font-size:14.5px;
      appearance:none;
    }
    .field option{color:#111}

    .rightScene{
      position:relative;
      min-height: 360px;
      padding:18px;
      overflow:hidden;
    }

    /* Moon */
    .moon{
      position:absolute;
      right: 46px; top: 18px;
      width: 170px; height:170px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, #ffffff, #dfe9ff 45%, rgba(255,255,255,.1) 70%);
      box-shadow: 0 0 40px rgba(255,255,255,.28), 0 0 120px rgba(99,230,255,.10);
      filter: drop-shadow(0 0 12px rgba(242,208,123,.10));
      animation: moonPulse 3.8s ease-in-out infinite;
      cursor:pointer;
    }
    .moon::after{
      content:"";
      position:absolute; inset:10px;
      border-radius:999px;
      background: radial-gradient(circle at 60% 40%, rgba(10,20,40,.20), transparent 55%),
                  radial-gradient(circle at 35% 60%, rgba(10,20,40,.16), transparent 55%);
      opacity:.55;
      mix-blend-mode: multiply;
    }
    @keyframes moonPulse{
      0%,100%{transform: translateY(0); box-shadow: 0 0 40px rgba(255,255,255,.28), 0 0 120px rgba(99,230,255,.10)}
      50%{transform: translateY(-3px); box-shadow: 0 0 55px rgba(255,255,255,.34), 0 0 150px rgba(99,230,255,.14)}
    }

    /* Stars */
    .stars{position:absolute; inset:0; pointer-events:none}
    .star{
      position:absolute; width:2px; height:2px; border-radius:999px;
      background: rgba(255,255,255,.9);
      box-shadow: 0 0 10px rgba(255,255,255,.65);
      opacity:.75;
      animation: twinkle 2.6s ease-in-out infinite;
    }
    @keyframes twinkle{
      0%,100%{opacity:.25; transform: scale(.8)}
      50%{opacity:1; transform: scale(1.3)}
    }

    /* Lanterns */
    .lantern{
      position:absolute;
      width:72px; height:140px;
      left: 44px; top: 58px;
      transform-origin: top center;
      animation: swing 3.6s ease-in-out infinite, float 6.4s ease-in-out infinite;
      filter: drop-shadow(0 18px 18px rgba(0,0,0,.35));
    }
    .lantern.l2{left: 128px; top: 132px; transform: scale(.85); opacity:.95; animation-duration: 4.2s, 7.5s}
    .lantern.l3{left: 18px; top: 180px; transform: scale(.7); opacity:.85; animation-duration: 4.8s, 8.4s}
    @keyframes swing{0%,100%{transform: rotate(-6deg)}50%{transform: rotate(6deg)}}
    @keyframes float{0%,100%{translate: 0 0}50%{translate: 0 -10px}}
    .string{
      position:absolute; left:50%; top:-58px; width:2px; height:60px;
      background: rgba(255,255,255,.22);
      transform: translateX(-50%);
    }
    .body{
      position:absolute; left:0; right:0; top:0; bottom:0;
      border-radius: 18px;
      background: linear-gradient(180deg, rgba(242,208,123,.22), rgba(255,255,255,.06));
      border: 1px solid rgba(242,208,123,.25);
      overflow:hidden;
    }
    .cut{
      position:absolute; inset:10px 10px 22px;
      border-radius: 14px;
      background: linear-gradient(180deg, rgba(0,0,0,.18), rgba(0,0,0,.05));
      border: 1px solid rgba(255,255,255,.10);
    }
    .glow{
      position:absolute; inset:auto 10px 10px 10px; height:30px;
      border-radius: 14px;
      background: radial-gradient(circle at 50% 10%, rgba(242,208,123,.55), transparent 60%);
      opacity:.75;
    }

    /* Lantern light mode */
    body.lit .glow{opacity: 1}
    body.lit .lantern .body{
      background: linear-gradient(180deg, rgba(242,208,123,.38), rgba(255,255,255,.10));
      border-color: rgba(242,208,123,.38);
      box-shadow: 0 0 30px rgba(242,208,123,.14);
    }
    body.lit .moon{
      box-shadow: 0 0 55px rgba(255,255,255,.34), 0 0 180px rgba(242,208,123,.10);
    }

    /* Sections */
    .grid{
      margin-top: 18px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:16px;
    }
    @media (max-width: 900px){
      .grid{grid-template-columns:1fr}
    }
    .sec{padding:18px}
    .sec h2{margin:0 0 8px; font-size:18px; letter-spacing:.2px}
    .sec p{margin:0; color: var(--muted); line-height:1.7; font-size:14.6px}
    .dua{
      margin-top:12px;
      padding:14px 14px;
      border-radius: 18px;
      background: rgba(0,0,0,.12);
      border: 1px solid rgba(255,255,255,.12);
    }
    .arabic{
      font-family: "Amiri", "Noto Naskh Arabic", serif;
      font-size: 20px;
      direction: rtl;
      letter-spacing: .2px;
    }
    .spark{
      position:relative;
      display:inline-block;
      padding: 0 6px;
      color: var(--gold);
      text-shadow: 0 0 18px rgba(242,208,123,.22);
    }

    /* Mosque silhouette */
    .mosque{
      margin-top: 18px;
      height: 120px;
      border-radius: 18px;
      background:
        radial-gradient(450px 90px at 50% 0%, rgba(99,230,255,.10), transparent 60%),
        linear-gradient(180deg, rgba(0,0,0,.0), rgba(0,0,0,.32));
      position:relative;
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.10);
    }
    .mosque svg{
      position:absolute; left:0; right:0; bottom:-2px; width:100%;
      opacity:.72;
    }

    /* Footer */
    footer{
      margin: 22px 0 10px;
      text-align:center;
      color: rgba(255,255,255,.62);
      font-size: 13px;
    }

    /* Reveal animation */
    .burst{
      display:inline-block;
      transform: scale(.96);
      opacity:.0;
      transition: all .5s ease;
      margin-top: 10px;
    }
    .burst.show{opacity:1; transform: scale(1)}
    .toast{
      position: fixed;
      left: 50%;
      bottom: 18px;
      transform: translateX(-50%);
      background: rgba(0,0,0,.55);
      border: 1px solid rgba(255,255,255,.14);
      color: rgba(255,255,255,.9);
      padding: 10px 12px;
      border-radius: 999px;
      backdrop-filter: blur(12px);
      box-shadow: 0 10px 30px rgba(0,0,0,.35);
      font-size: 13px;
      opacity: 0;
      pointer-events:none;
      transition: opacity .25s ease, transform .25s ease;
    }
    .toast.show{opacity:1; transform: translateX(-50%) translateY(-4px)}

    /* Countdown big numbers */
    .bigNum{font-size:34px;font-weight:900;margin-top:6px;letter-spacing:.4px}
    .miniRow{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin-top:10px}
  </style>
</head>

<body>
  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <span class="dot"></span>
        <div>
          <div style="font-weight:700">Ramadan Greeting</div>
          <small>Made by Zubayd Hossain</small>
        </div>
      </div>

      <div class="controls">
        <div class="pill" id="langBtn" title="Toggle language">
          üåê <span id="langLabel">English</span>
        </div>
        <label class="pill" title="Turn on lanterns">
          üèÆ <span id="lightLabel">Lanterns</span>
          <input id="lightToggle" type="checkbox"/>
        </label>
      </div>
    </div>

    <section class="hero">
      <!-- LEFT -->
      <div class="card heroCard">
        <div class="shine"></div>

        <h1 id="title">Ramadan Mubarak <span class="spark">üåô</span></h1>
        <p class="sub" id="subtitle">
          May your days be filled with peace, your nights with prayers, and your heart with ŸÜŸàÿ±.
        </p>

        <div class="tagrow">
          <div class="tag">‚ú® Unique ‚Ä¢ Premium</div>
          <div class="tag">‚è≥ Live Sehri/Iftar</div>
          <div class="tag">üì§ Shareable</div>
        </div>

        <div class="revealBox">
          <div class="field">
            üë§ <input id="nameInput" placeholder="Type your name (optional)" />
          </div>
          <button class="btn primary" id="revealBtn">Tap to reveal blessing</button>
          <button class="btn" id="shareBtn">Share WhatsApp</button>
          <button class="btn" id="copyBtn">Copy Link</button>
        </div>

        <div class="burst" id="burst">
          <div style="margin-top:14px;font-weight:700;font-size:18px" id="personalLine">
            Ramadan Mubarak ‚ú®
          </div>
          <div style="margin-top:6px;color:rgba(255,255,255,.74);line-height:1.6" id="personalSub">
            You are remembered in my dua tonight. ü§≤
          </div>
        </div>

        <!-- LIVE COUNTDOWN -->
        <div class="dua" style="margin-top:18px">
          <div style="display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap">
            <div style="font-weight:800" id="liveTitle">‚è≥ Sehri & Iftar Live (Bangladesh)</div>
            <div class="tag" id="todayLabel">Loading‚Ä¶</div>
          </div>

          <div class="miniRow">
            <div class="field" style="min-width:260px; flex:1">
              üìç
              <select id="citySelect" aria-label="Select city">
                <option value="Dhaka">Dhaka (Dhaka Division)</option>
                <option value="Chattogram">Chattogram (Chattogram Division)</option>
                <option value="Khulna">Khulna (Khulna Division)</option>
                <option value="Rajshahi">Rajshahi (Rajshahi Division)</option>
                <option value="Sylhet">Sylhet (Sylhet Division)</option>
                <option value="Barishal">Barishal (Barishal Division)</option>
                <option value="Rangpur">Rangpur (Rangpur Division)</option>
                <option value="Mymensingh">Mymensingh (Mymensingh Division)</option>
              </select>
            </div>

            <div class="tag" id="sourceLabel">Source: AlAdhan API</div>
          </div>

          <div class="grid" style="margin-top:14px">
            <div class="dua" style="padding:16px;margin-top:0">
              <div style="font-weight:800; font-size:16px" id="sehriTitle">Sehri ends in</div>
              <div class="bigNum" id="sehriCountdown">--:--:--</div>
              <div style="color:rgba(255,255,255,.72); margin-top:8px" id="sehriTime">Imsak: -- | Fajr: --</div>
            </div>

            <div class="dua" style="padding:16px;margin-top:0">
              <div style="font-weight:800; font-size:16px" id="iftarTitle">Iftar in</div>
              <div class="bigNum" id="iftarCountdown">--:--:--</div>
              <div style="color:rgba(255,255,255,.72); margin-top:8px" id="iftarTime">Maghrib: --</div>
            </div>
          </div>

          <p style="margin:12px 0 0; color:rgba(255,255,255,.62); line-height:1.6; font-size:13px" id="noteLine">
            Note: Local authority times can differ by a few minutes. (You can add offsets in code if needed.)
          </p>
        </div>

        <!-- MOSQUE -->
        <div class="mosque" title="A calm night at the masjid">
          <svg viewBox="0 0 1200 260" preserveAspectRatio="none" aria-hidden="true">
            <path fill="rgba(255,255,255,.18)" d="M0,240 L0,210 L40,210 L40,170 L70,170 L70,210 L95,210 L95,140 L125,140 L125,110
              C125,75 150,55 175,55 C200,55 225,75 225,110 L225,140 L255,140 L255,210 L285,210 L285,165 L315,165 L315,210
              L345,210 L345,150 L370,150 L370,125 L395,125 L395,210 L430,210 L430,160 L455,160 L455,210 L485,210
              L485,130 C485,95 510,70 540,70 C570,70 595,95 595,130 L595,210
              L635,210 L635,165 L660,165 L660,210 L700,210 L700,150 L725,150 L725,125 L750,125 L750,210
              L785,210 L785,140 L815,140 L815,110 C815,75 840,55 865,55 C890,55 915,75 915,110 L915,140
              L945,140 L945,210 L975,210 L975,170 L1005,170 L1005,210 L1040,210 L1040,240 Z"/>
          </svg>
        </div>
      </div>

      <!-- RIGHT -->
      <div class="card rightScene" aria-hidden="true">
        <div class="stars" id="stars"></div>
        <div class="moon" id="moon"></div>

        <div class="lantern l1">
          <div class="string"></div>
          <div class="body">
            <div class="cut"></div>
            <div class="glow"></div>
          </div>
        </div>
        <div class="lantern l2">
          <div class="string"></div>
          <div class="body">
            <div class="cut"></div>
            <div class="glow"></div>
          </div>
        </div>
        <div class="lantern l3">
          <div class="string"></div>
          <div class="body">
            <div class="cut"></div>
            <div class="glow"></div>
          </div>
        </div>

        <div style="position:absolute; left:18px; right:18px; bottom:16px; padding:14px 14px; border-radius:18px;
                    background: rgba(0,0,0,.12); border:1px solid rgba(255,255,255,.12)">
          <div style="font-weight:700" id="miniTitle">A night of ŸÜŸàÿ± & peace</div>
          <div style="color:rgba(255,255,255,.72); margin-top:6px; line-height:1.65" id="miniText">
            Turn on the lanterns and feel the calm. Tap the moon for a secret blessing.
          </div>
        </div>
      </div>
    </section>

    <section class="grid">
      <div class="card sec">
        <h2 id="sec1Title">A gentle reminder</h2>
        <p id="sec1Text">
          Let this Ramadan be the month where your heart feels lighter and your prayers feel deeper.
          May Allah open doors you never imagined.
        </p>

        <div class="dua">
          <div class="arabic">ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿ®ŸéŸÑŸêŸëÿ∫ŸíŸÜŸéÿß ÿ±ŸéŸÖŸéÿ∂ŸéÿßŸÜŸé ŸàŸéÿ™ŸéŸÇŸéÿ®ŸéŸëŸÑŸí ŸÖŸêŸÜŸéŸëÿß</div>
          <p style="margin-top:10px" id="duaMeaning">
            O Allah, let us reach Ramadan and accept our deeds.
          </p>
        </div>
      </div>

      <div class="card sec">
        <h2 id="sec2Title">Make it personal</h2>
        <p id="sec2Text">
          Type a name, tap reveal, and share the blessing. It feels warm, unique, and unforgettable.
        </p>
        <div class="dua">
          <p id="sec2Note">
            Tip: Tap the moon 5 times for a secret blessing. üåô
          </p>
        </div>
      </div>
    </section>

    <footer>
      Made with ‚ù§Ô∏è by <strong>Zubayd Hossain</strong> ‚Ä¢ <span id="footLine">May this Ramadan be your turning point.</span>
    </footer>
  </div>

  <div class="toast" id="toast">Copied!</div>

  <script>
    // ====== Stars generator ======
    const stars = document.getElementById('stars');
    const starCount = 46;
    for(let i=0;i<starCount;i++){
      const s = document.createElement('div');
      s.className = 'star';
      s.style.left = Math.random()*100 + '%';
      s.style.top  = Math.random()*70 + '%';
      s.style.animationDelay = (Math.random()*2.5) + 's';
      s.style.opacity = (0.35 + Math.random()*0.65).toFixed(2);
      const size = (1 + Math.random()*2.2);
      s.style.width = size + 'px';
      s.style.height = size + 'px';
      stars.appendChild(s);
    }

    // ====== Helpers ======
    const $ = (id)=>document.getElementById(id);
    const toast = $('toast');

    function showToast(msg){
      toast.textContent = msg;
      toast.classList.add('show');
      setTimeout(()=>toast.classList.remove('show'), 1200);
    }

    // ====== Language content ======
    let lang = 'en';
    const content = {
      en: {
        langLabel: 'English',
        title: 'Ramadan Mubarak üåô',
        subtitle: 'May your days be filled with peace, your nights with prayers, and your heart with ŸÜŸàÿ±.',
        namePh: 'Type your name (optional)',
        revealBtn: 'Tap to reveal blessing',
        shareBtn: 'Share WhatsApp',
        copyBtn: 'Copy Link',
        personalSub: 'You are remembered in my dua tonight. ü§≤',
        miniTitle: 'A night of ŸÜŸàÿ± & peace',
        miniText: 'Turn on the lanterns and feel the calm. Tap the moon for a secret blessing.',
        sec1Title: 'A gentle reminder',
        sec1Text: 'Let this Ramadan be the month where your heart feels lighter and your prayers feel deeper. May Allah open doors you never imagined.',
        duaMeaning: 'O Allah, let us reach Ramadan and accept our deeds.',
        sec2Title: 'Make it personal',
        sec2Text: 'Type a name, tap reveal, and share the blessing. It feels warm, unique, and unforgettable.',
        sec2Note: 'Tip: Tap the moon 5 times for a secret blessing. üåô',
        footLine: 'May this Ramadan be your turning point.',
        lightLabel: 'Lanterns',
        liveTitle: '‚è≥ Sehri & Iftar Live (Bangladesh)',
        todayLoading: 'Loading‚Ä¶',
        noteLine: 'Note: Local authority times can differ by a few minutes. (You can add offsets in code if needed.)',
        sehriTitle: 'Sehri ends in',
        iftarTitle: 'Iftar in',
      },
      bn: {
        langLabel: '‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ',
        title: '‡¶∞‡¶Æ‡¶ú‡¶æ‡¶® ‡¶Æ‡ßã‡¶¨‡¶æ‡¶∞‡¶ï üåô',
        subtitle: '‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ò‡¶∞‡ßá ‡¶∂‡¶æ‡¶®‡ßç‡¶§‡¶ø, ‡¶Æ‡¶®‡ßá ‡¶™‡ßç‡¶∞‡¶∂‡¶æ‡¶®‡ßç‡¶§‡¶ø, ‡¶Ü‡¶∞ ‡¶¶‡ßã‡ßü‡¶æ‡ßü ‡¶ï‡¶¨‡ßÅ‡¶≤ ‡¶π‡ßã‡¶ï ‡¶®‡ßÇ‡¶∞‡ßá‡¶∞ ‡¶Ü‡¶≤‡ßã‡•§',
        namePh: '‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶® (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)',
        revealBtn: '‡¶ü‡ßç‡¶Ø‡¶æ‡¶™ ‡¶ï‡¶∞‡ßá ‡¶∂‡ßÅ‡¶≠‡ßá‡¶ö‡ßç‡¶õ‡¶æ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®',
        shareBtn: 'WhatsApp ‡¶∂‡ßá‡ßü‡¶æ‡¶∞',
        copyBtn: '‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶ï‡¶™‡¶ø',
        personalSub: '‡¶Ü‡¶ú ‡¶∞‡¶æ‡¶§‡ßá ‡¶Ü‡¶Æ‡¶æ‡¶ï‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¶‡ßã‡ßü‡¶æ‡ßü ‡¶Æ‡¶®‡ßá ‡¶∞‡¶æ‡¶ñ‡¶¨‡ßá‡¶® ü§≤',
        miniTitle: '‡¶®‡ßÇ‡¶∞ ‡¶ì ‡¶∂‡¶æ‡¶®‡ßç‡¶§‡¶ø‡¶∞ ‡¶∞‡¶æ‡¶§',
        miniText: '‡¶≤‡¶£‡ßç‡¶†‡¶® ‡¶Ö‡¶® ‡¶ï‡¶∞‡ßá ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®‚Äî‡¶è‡¶ï‡¶ü‡¶æ ‡¶∂‡¶æ‡¶®‡ßç‡¶§ ‡¶Ö‡¶®‡ßÅ‡¶≠‡ßÇ‡¶§‡¶ø ‡¶Ü‡¶∏‡¶¨‡ßá‡•§ ‡¶ö‡¶æ‡¶Å‡¶¶‡ßá ‡¶ü‡ßç‡¶Ø‡¶æ‡¶™ ‡¶ï‡¶∞‡¶≤‡ßá ‡¶ó‡ßã‡¶™‡¶® ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ ‡¶™‡¶æ‡¶¨‡ßá‡¶®‡•§',
        sec1Title: '‡¶è‡¶ï‡¶ü‡¶ø ‡¶∏‡ßÅ‡¶®‡ßç‡¶¶‡¶∞ ‡¶∏‡ßç‡¶Æ‡¶∞‡¶£',
        sec1Text: '‡¶è‡¶á ‡¶∞‡¶Æ‡¶ú‡¶æ‡¶® ‡¶π‡ßã‡¶ï ‡¶è‡¶Æ‡¶® ‡¶è‡¶ï‡¶ü‡¶ø ‡¶Æ‡¶æ‡¶∏‚Äî‡¶Ø‡ßá‡¶ñ‡¶æ‡¶®‡ßá ‡¶Æ‡¶® ‡¶π‡¶æ‡¶≤‡¶ï‡¶æ ‡¶π‡¶¨‡ßá, ‡¶á‡¶¨‡¶æ‡¶¶‡¶§ ‡¶ó‡¶≠‡ßÄ‡¶∞ ‡¶π‡¶¨‡ßá‡•§ ‡¶Ü‡¶≤‡ßç‡¶≤‡¶æ‡¶π ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ö‡¶ú‡¶æ‡¶®‡¶æ ‡¶¶‡¶∞‡¶ú‡¶æ ‡¶ñ‡ßÅ‡¶≤‡ßá ‡¶¶‡¶ø‡¶®‡•§',
        duaMeaning: '‡¶π‡ßá ‡¶Ü‡¶≤‡ßç‡¶≤‡¶æ‡¶π, ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶∞‡¶Æ‡¶ú‡¶æ‡¶® ‡¶™‡¶∞‡ßç‡¶Ø‡¶®‡ßç‡¶§ ‡¶™‡ßå‡¶Å‡¶õ‡ßá ‡¶¶‡¶ø‡¶® ‡¶è‡¶¨‡¶Ç ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶Ü‡¶Æ‡¶≤ ‡¶ï‡¶¨‡ßÅ‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§',
        sec2Title: '‡¶¨‡ßç‡¶Ø‡¶ï‡ßç‡¶§‡¶ø‡¶ó‡¶§ ‡¶ï‡¶∞‡ßá ‡¶§‡ßÅ‡¶≤‡ßÅ‡¶®',
        sec2Text: '‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®, ‡¶ü‡ßç‡¶Ø‡¶æ‡¶™ ‡¶ï‡¶∞‡ßÅ‡¶®, ‡¶Ü‡¶∞ ‡¶∂‡ßÅ‡¶≠‡ßá‡¶ö‡ßç‡¶õ‡¶æ‡¶ü‡¶æ ‡¶∂‡ßá‡ßü‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®‚Äî‡¶è‡¶ü‡¶æ ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ ‡¶ì ‡¶Æ‡¶®‡ßá ‡¶•‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶Æ‡¶§‡ßã ‡¶Ö‡¶®‡ßÅ‡¶≠‡ßÇ‡¶§‡¶ø ‡¶¶‡ßá‡ßü‡•§',
        sec2Note: '‡¶ü‡¶ø‡¶™‡¶∏: ‡¶ö‡¶æ‡¶Å‡¶¶‡ßá ‡ß´ ‡¶¨‡¶æ‡¶∞ ‡¶ü‡ßç‡¶Ø‡¶æ‡¶™ ‡¶ï‡¶∞‡¶≤‡ßá ‡¶ó‡ßã‡¶™‡¶® ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ ‡¶Ü‡¶∏‡¶¨‡ßá üåô',
        footLine: '‡¶è‡¶á ‡¶∞‡¶Æ‡¶ú‡¶æ‡¶® ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ú‡ßÄ‡¶¨‡¶®‡ßá ‡¶®‡¶§‡ßÅ‡¶® ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶π‡ßã‡¶ï‡•§',
        lightLabel: '‡¶≤‡¶£‡ßç‡¶†‡¶®',
        liveTitle: '‚è≥ ‡¶∏‡ßá‡¶π‡¶∞‡¶ø ‡¶ì ‡¶á‡¶´‡¶§‡¶æ‡¶∞ ‡¶≤‡¶æ‡¶á‡¶≠ (‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂)',
        todayLoading: '‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá‚Ä¶',
        noteLine: '‡¶®‡ßã‡¶ü: ‡¶∏‡ßç‡¶•‡¶æ‡¶®‡ßÄ‡ßü ‡¶ï‡¶∞‡ßç‡¶§‡ßÉ‡¶™‡¶ï‡ßç‡¶∑‡ßá‡¶∞ ‡¶∏‡¶Æ‡ßü‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶ï‡ßü‡ßá‡¶ï ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü ‡¶™‡¶æ‡¶∞‡ßç‡¶•‡¶ï‡ßç‡¶Ø ‡¶π‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡•§ (‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®‡ßá ‡¶ï‡ßã‡¶°‡ßá ‡¶Ö‡¶´‡¶∏‡ßá‡¶ü ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®)',
        sehriTitle: '‡¶∏‡ßá‡¶π‡¶∞‡¶ø ‡¶∂‡ßá‡¶∑ ‡¶π‡¶§‡ßá ‡¶¨‡¶æ‡¶ï‡¶ø',
        iftarTitle: '‡¶á‡¶´‡¶§‡¶æ‡¶∞ ‡¶π‡¶§‡ßá ‡¶¨‡¶æ‡¶ï‡¶ø',
      }
    };

    function applyLang(){
      const c = content[lang];
      $('langLabel').textContent = c.langLabel;
      $('title').textContent = c.title;
      $('subtitle').textContent = c.subtitle;
      $('nameInput').placeholder = c.namePh;
      $('revealBtn').textContent = c.revealBtn;
      $('shareBtn').textContent = c.shareBtn;
      $('copyBtn').textContent = c.copyBtn;
      $('personalSub').textContent = c.personalSub;
      $('miniTitle').textContent = c.miniTitle;
      $('miniText').textContent = c.miniText;
      $('sec1Title').textContent = c.sec1Title;
      $('sec1Text').textContent = c.sec1Text;
      $('duaMeaning').textContent = c.duaMeaning;
      $('sec2Title').textContent = c.sec2Title;
      $('sec2Text').textContent = c.sec2Text;
      $('sec2Note').textContent = c.sec2Note;
      $('footLine').textContent = c.footLine;
      $('lightLabel').textContent = c.lightLabel;

      $('liveTitle').textContent = c.liveTitle;
      $('noteLine').textContent = c.noteLine;
      $('sehriTitle').textContent = c.sehriTitle;
      $('iftarTitle').textContent = c.iftarTitle;

      // refresh "Loading..." label if we are loading
      if($('todayLabel').dataset.loading === "1"){
        $('todayLabel').textContent = c.todayLoading;
      }
    }
    applyLang();

    // ====== Reveal logic ======
    const burst = $('burst');
    $('revealBtn').addEventListener('click', ()=>{
      const name = $('nameInput').value.trim();
      const greet = (lang==='bn') ? '‡¶∞‡¶Æ‡¶ú‡¶æ‡¶® ‡¶Æ‡ßã‡¶¨‡¶æ‡¶∞‡¶ï' : 'Ramadan Mubarak';
      $('personalLine').textContent = name ? `${greet}, ${name} ‚ú®` : `${greet} ‚ú®`;
      burst.classList.add('show');
      showToast((lang==='bn') ? '‡¶∂‡ßÅ‡¶≠‡ßá‡¶ö‡ßç‡¶õ‡¶æ ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶Ø‡¶æ‡¶ö‡ßç‡¶õ‡ßá ‚ú®' : 'Blessing revealed ‚ú®');
    });

    // ====== Language toggle ======
    $('langBtn').addEventListener('click', ()=>{
      lang = (lang==='en') ? 'bn' : 'en';
      applyLang();
      showToast((lang==='bn') ? '‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶Æ‡ßã‡¶°' : 'English mode');
    });

    // ====== Lantern light toggle ======
    $('lightToggle').addEventListener('change', (e)=>{
      document.body.classList.toggle('lit', e.target.checked);
      showToast(e.target.checked ? ((lang==='bn')?'‡¶≤‡¶£‡ßç‡¶†‡¶® ‡¶Ö‡¶® ‚ú®':'Lanterns on ‚ú®') : ((lang==='bn')?'‡¶≤‡¶£‡ßç‡¶†‡¶® ‡¶Ö‡¶´':'Lanterns off'));
    });

    // ====== Copy link ======
    $('copyBtn').addEventListener('click', async ()=>{
      try{
        await navigator.clipboard.writeText(location.href);
        showToast((lang==='bn') ? '‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶ï‡¶™‡¶ø ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá ‚úÖ' : 'Link copied ‚úÖ');
      }catch{
        showToast((lang==='bn') ? '‡¶ï‡¶™‡¶ø ‡¶∏‡¶Æ‡ßç‡¶≠‡¶¨ ‡¶π‡ßü‡¶®‡¶ø' : 'Copy failed');
      }
    });

    // ====== WhatsApp share ======
    $('shareBtn').addEventListener('click', ()=>{
      const name = $('nameInput').value.trim();
      const greet = (lang==='bn') ? '‡¶∞‡¶Æ‡¶ú‡¶æ‡¶® ‡¶Æ‡ßã‡¶¨‡¶æ‡¶∞‡¶ï' : 'Ramadan Mubarak';

      const seh = $('sehriCountdown').textContent;
      const ift = $('iftarCountdown').textContent;
      const city = $('citySelect').value;

      const msg = (lang==='bn')
        ? `${greet} üåô‚ú®\n${name ? ('‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø, ' + name + ' ü§≤\n') : ''}` +
          `üìç ${city}\n` +
          `‚è≥ ‡¶∏‡ßá‡¶π‡¶∞‡¶ø: ${seh}\n` +
          `‚è≥ ‡¶á‡¶´‡¶§‡¶æ‡¶∞: ${ift}\n\n` +
          `‡¶Ü‡¶≤‡ßç‡¶≤‡¶æ‡¶π ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ú‡ßÄ‡¶¨‡¶®‡¶ï‡ßá ‡¶∂‡¶æ‡¶®‡ßç‡¶§‡¶ø ‡¶ì ‡¶¨‡¶∞‡¶ï‡¶§‡ßá ‡¶≠‡¶∞‡ßá ‡¶¶‡¶ø‡¶®‡•§\n\n‡¶≤‡¶ø‡¶Ç‡¶ï: ${location.href}`
        : `${greet} üåô‚ú®\n${name ? ('For you, ' + name + ' ü§≤\n') : ''}` +
          `üìç ${city}\n` +
          `‚è≥ Sehri: ${seh}\n` +
          `‚è≥ Iftar: ${ift}\n\n` +
          `May Allah bless you with peace and barakah.\n\nLink: ${location.href}`;

      const url = "https://wa.me/?text=" + encodeURIComponent(msg);
      window.open(url, "_blank");
    });

    // ====== Secret blessing: tap moon 5 times ======
    let moonTaps = 0;
    $('moon').addEventListener('click', ()=>{
      moonTaps++;
      if(moonTaps >= 5){
        moonTaps = 0;
        const secret = (lang==='bn')
          ? 'üåô ‡¶ó‡ßã‡¶™‡¶® ‡¶¶‡ßã‡ßü‡¶æ: ‡¶Ü‡¶≤‡ßç‡¶≤‡¶æ‡¶π ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∏‡¶π‡¶ú‡¶§‡¶æ ‡¶≤‡¶ø‡¶ñ‡ßá ‡¶¶‡¶ø‡¶®‡•§'
          : 'üåô Secret blessing: May Allah write ease for you.';
        $('personalSub').textContent = secret;
        burst.classList.add('show');
        showToast((lang==='bn') ? '‡¶ó‡ßã‡¶™‡¶® ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ ‚ú®' : 'Secret unlocked ‚ú®');
      }
    });

    // ====== LIVE SEHRI/IFTAR (Bangladesh) ======
    const citySelect = $('citySelect');
    const todayLabel = $('todayLabel');
    const sehriCountdown = $('sehriCountdown');
    const iftarCountdown = $('iftarCountdown');
    const sehriTime = $('sehriTime');
    const iftarTime = $('iftarTime');

    // IMPORTANT:
    // If you want to fine-tune times to match your local schedule exactly,
    // you can add minute offsets here (example: +2 means add 2 minutes).
    const OFFSETS = {
      sehriEndMinutes: 0, // apply to Fajr for "Sehri ends at"
      iftarMinutes: 0     // apply to Maghrib for Iftar
    };

    // AlAdhan method (calculation). You can try different method numbers if you want.
    const METHOD = 2;
    const COUNTRY = "Bangladesh";
    const TIMEZONE = "Asia/Dhaka";
    let timer = null;

    function nowDhaka(){
      return new Date(new Date().toLocaleString("en-US", { timeZone: TIMEZONE }));
    }

    function parseTimeToDhakaDate(hhmm){
      // Accept "HH:MM" or "HH:MM (TZ)" formats
      const clean = (hhmm || "").split(" ")[0].trim();
      const parts = clean.split(":");
      if(parts.length < 2) return null;
      const h = Number(parts[0]), m = Number(parts[1]);
      if(Number.isNaN(h) || Number.isNaN(m)) return null;
      const d = nowDhaka();
      d.setHours(h, m, 0, 0);
      return d;
    }

    function addMinutes(dateObj, minutes){
      if(!dateObj) return null;
      return new Date(dateObj.getTime() + minutes * 60000);
    }

    function fmtHMS(ms){
      if(ms < 0) ms = 0;
      const total = Math.floor(ms/1000);
      const h = String(Math.floor(total/3600)).padStart(2,"0");
      const m = String(Math.floor((total%3600)/60)).padStart(2,"0");
      const s = String(total%60).padStart(2,"0");
      return `${h}:${m}:${s}`;
    }

    async function fetchTimings(city){
      const url = `https://api.aladhan.com/v1/timingsByCity?city=${encodeURIComponent(city)}&country=${encodeURIComponent(COUNTRY)}&method=${METHOD}`;
      const res = await fetch(url, { cache: "no-store" });
      if(!res.ok) throw new Error("Failed to fetch timings");
      const json = await res.json();

      const t = json?.data?.timings || {};
      const dateReadable = json?.data?.date?.readable || "";
      return {
        dateReadable,
        fajr: t.Fajr,
        maghrib: t.Maghrib,
        imsak: t.Imsak
      };
    }

    function startCountdown(times){
      if(timer) clearInterval(timer);

      const { fajr, maghrib, imsak, dateReadable } = times;

      // Show date
      todayLabel.dataset.loading = "0";
      todayLabel.textContent = dateReadable ? `Today: ${dateReadable}` : "Today";

      // Show raw timings
      sehriTime.textContent = `Imsak: ${imsak || "--"} | Fajr: ${fajr || "--"}`;
      iftarTime.textContent = `Maghrib: ${maghrib || "--"}`;

      // Build Date objects in Dhaka timezone
      let fajrDate = addMinutes(parseTimeToDhakaDate(fajr), OFFSETS.sehriEndMinutes);
      let maghribDate = addMinutes(parseTimeToDhakaDate(maghrib), OFFSETS.iftarMinutes);

      timer = setInterval(()=>{
        const now = nowDhaka();

        // If time already passed today, countdown stays at 00:00:00
        if(fajrDate){
          sehriCountdown.textContent = fmtHMS(fajrDate - now);
        }else{
          sehriCountdown.textContent = "--:--:--";
        }

        if(maghribDate){
          iftarCountdown.textContent = fmtHMS(maghribDate - now);
        }else{
          iftarCountdown.textContent = "--:--:--";
        }
      }, 250);
    }

    async function loadCity(city){
      todayLabel.dataset.loading = "1";
      todayLabel.textContent = content[lang].todayLoading;

      sehriCountdown.textContent = "--:--:--";
      iftarCountdown.textContent = "--:--:--";
      sehriTime.textContent = "Imsak: -- | Fajr: --";
      iftarTime.textContent = "Maghrib: --";

      try{
        const times = await fetchTimings(city);
        startCountdown(times);
      }catch(e){
        todayLabel.dataset.loading = "0";
        todayLabel.textContent = (lang==='bn') ? "‡¶ü‡¶æ‡¶á‡¶Æ ‡¶≤‡ßã‡¶° ‡¶π‡ßü‡¶®‡¶ø (‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶®‡ßá‡¶ü ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®)" : "Could not load times (check internet)";
        if(timer) clearInterval(timer);
      }
    }

    citySelect.addEventListener("change", ()=> loadCity(citySelect.value));

    // Initial load
    loadCity(citySelect.value);
  </script>
</body>
</html>
